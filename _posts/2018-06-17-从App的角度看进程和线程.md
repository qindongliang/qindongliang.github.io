---
layout: mypost
title: 从App的角度看进程和线程
categories: [操作系统]
---

![](https://mmbiz.qpic.cn/mmbiz_png/4pLEYn96YnUUf2EeRr0h68nWVfSuDI72R5iayLQLib1b8QgIqRqA7rjia2nclicPTv1o2KyFgpcbaicgItVAhCutWVw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1)

在现在人人都有一部手机或电脑的年代，我们几乎天天都在使用各种app，如微信，QQ，抖音，优酷等等软件，表面上我们是与各种app交互，但如果站在操作系统的角度来看，其实我们每天都是在和各种进程或者线程打交道，如果你已经有点疑惑了，没关系，下面我们慢慢来聊个明白。

先看这么几个问题：

1，你手机或者电脑上装的各种app在本质上是什么？

2，一个软件打开和不打开的区别是什么？

3，为什么打开的软件越多就感觉系统越慢？

4，为什么你在用微信语音的时候，还能和别人聊天发消息？

下面我们带着问题来学习一下这其中的知识：

首先对于第一个问题比较简单，我们的各种app其实都是一个软件，描述的再专业一些就是一个程序或者一份能执行的代码。

第二个问题，在使用者层面，打开了就是能用的app，不打开就是一个快捷图标，但在操作系统层面就不一样了，打开时候操作系统实际上会创建一个进程来运行，而关闭的时候，进程就会退出。

那么问题来了，什么是进程：简单的说就是一个正在运行的程序实例。 程序的运行是需要内存和各种操作系统资源的，不同的程序使用的资源是不一样的，比如你打开一个吃鸡游戏和打开一个记事本两者消耗的资源是有很大差异的。

这也就解释了为什么打开的软件越多系统就越卡顿，本质上软件越多，打开的进程就越多，而每个进程都需要一定能资源才能维持运行，我们的操作系统的资源又是有限的，所以占用的越多系统就会越繁忙，就会出现各种卡顿和反应变慢。

仅仅把软件运行起来还是不够的，因为我们还要在软件里面各种交互，比如使用微信语音的同时，还能给对方发图片，或者捞个漂流瓶。再或者使用有道云笔记的时候，你在不停的写字，后台有一个线程会自动每隔一段时间保存一下内存，避免突然断电时内容全部丢失，这底层其实就是使用不同的线程来处理的。

到这里，我们在总结下进程和线程的定义：

进程：一个正在运行的程序实例，包含一个或多个线程，最少有一个线程。

线程：执行进程的一部分程序或者代码指令。

那么他们之间的区别和联系是什么？

![](https://mmbiz.qpic.cn/mmbiz_png/4pLEYn96YnUUf2EeRr0h68nWVfSuDI726In7DeAwss8j4qOvn1HmdcmAKuBX8jRbW7ps73iaqdkicGgJVpsjtwjg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1)

（1）进程包含至少一个线程，果只有一个线程，这个线程通常叫做主线程。线程是进程的一部分代码或者指令

（2）进程有独立的内存存储，线程共享进程的内存空间，此外线程有自己独立的的栈存储。

（3）进程通信只能依靠pipe管道或者socket，一个进程内的线程可以直接通信

（4）创建一个进程是重量级操作，而创建一个线程是轻量级操作

（5）进程的文件描述符大部分不共享，线程共享文件描述符

（6）进程有独立的signal信号，线程共享进程的signal信号

（7）进程相互之间不依赖，线程之间有依赖。

（8）进程不需要同步，线程一般需要同步

（9）进程是数据组织的概念，线程是cpu调度的概念

(10) 进程上下文切换慢，线程上下文切换快

最后还有一个问题，子进程与线程有什么关系？这里需要注意子进程也是一个进程，一般用于多任务的操作系统，子进程也称子任务与进程的性质是一样的，也可以包含一个或多个线程。

![](https://res.wx.qq.com/product_material/zlzc9eHL_NaYtMgID5mspjjfqVrr1O7_RSYhGlG8KAQNiZRZ3xGVEtXMUt7gJu-h?tp=webp&wxfrom=5&wx_lazy=1)

## 侏罗纪世界2

主演：克里斯·帕拉特 / 布莱丝·达拉斯·霍华德 / 泰德·拉文

猫眼电影演出 广告

购买

总结：

本文主要介绍了操作系统中进程和线程的定义，区别和联系。了解这些知识将更加有助于我们学习和使用多线程编程。有一点需要大家注意，进程是程序的运行实例，类似面向对象编程里面的对象，而程序则更像是一个类，通过这个程序我们可以构造多个对象，也就是我们可以启动多个进程，比如PC上的QQ是可以启动数个的，当然跟软件有关系，有些软件只能启动一个，每启动一个程序，其实就是启动了一个进程。如在java的程序里面每启动一个main方法，其实就是启动了一个jvm进程，而main方法就是我们上面所说的进程中至少包含一个线程的主线程。

![](https://mmbiz.qpic.cn/mmbiz_jpg/4pLEYn96YnUXN81iaUHc4L96AXkVfLX9DAMoNFUtj6Iy9TFicsVQyhyElEwQqOcLsSdUaWQ8RgZQ2FicyWaLiaafWA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1)